import numpy as np
import cv2

img1 = cv2.imread('1.png')
img2 = cv2.imread('2.png')

# 灰度图不需要这一步骤
# Convert it to grayscale
# img1 = cv2.cvtColor(img1, cv2.COLOR_BGR2GRAY)
# img2 = cv2.cvtColor(img2, cv2.COLOR_BGR2GRAY)
# img1 = cv2.bitwise_not(img1)
# img2 = cv2.bitwise_not(img2)

# Initialize the ORB detector algorithm
orb = cv2.ORB_create()

# Now detect the keypoints and compute
# the descriptors for the query image
# and train image
queryKeypoints, queryDescriptors = orb.detectAndCompute(img1, None)
trainKeypoints, trainDescriptors = orb.detectAndCompute(img2, None)

# keypoints
matcher = cv2.BFMatcher()
matches = matcher.match(queryDescriptors, trainDescriptors)
final_img = cv2.drawMatches(img1, queryKeypoints, img2, trainKeypoints, matches[:"保留的N个点位"], None)

# Show the final image
cv2.imshow("Matches", final_img)
cv2.imwrite("输出路径与文件名", final_img)
cv2.waitKey(0)
cv2.destroyAllWindows()
