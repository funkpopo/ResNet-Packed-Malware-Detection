import numpy
from PIL import Image
import binascii


def getmatrixfrom_bin(filename1, width):
    with open(filename1, 'rb') as f:
        content = f.read()
    hexst = binascii.hexlify(content)  # 将二进制文件转换为十六进制字符串
    fh = numpy.array([int(hexst[i:i + 2], 16) for i in range(0, len(hexst), 2)])  # 按字节分割
    rn = (len(fh) // width)
    fh = numpy.reshape(fh[:rn * width], (- 1, width))  # 根据设定的宽度生成矩阵
    fh = numpy.uint8(fh)
    return fh


filename = "目标路径/ filename.exe"
# 此处定义了图像宽度，在”cutimage_bat.py“中定义切片高度
im = Image.fromarray(getmatrixfrom_bin(filename, 512))  # 转换为图像
im.save("目标路径/ filename.jpg")
